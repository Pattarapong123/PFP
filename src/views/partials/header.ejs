<header class="navbar" role="banner">
  <style>
    /* ====== Layout: ‡∏ã‡πâ‡∏≤‡∏¢(‡πÇ‡∏•‡πÇ‡∏Å‡πâ) | ‡∏Å‡∏•‡∏≤‡∏á(‡πÄ‡∏°‡∏ô‡∏π) | ‡∏Ç‡∏ß‡∏≤(actions) ====== */
    .site-header{
      display:grid;
      grid-template-columns: minmax(100px,auto) 1fr auto; /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÇ‡∏•‡πÇ‡∏Å‡πâ */
      align-items:center;
      min-height:68px;                /* ‚Üë ‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÉ‡∏´‡∏ç‡πà */
      padding:4px 20px;
      gap:16px;
    }

    /* ----- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ ----- */
    .brand{
      display:flex; align-items:center; justify-self:start;
      text-decoration:none; flex:0 0 auto; min-width:100px;
    }
    .brand-logo{
      height: 56px;                   /* ‚Üë ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÇ‡∏•‡πÇ‡∏Å‡πâ */
      width: auto;                    /* ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô */
      object-fit: contain;
      display:block;
      background: transparent;
      border-radius: 0;               /* ‡πÄ‡∏≠‡∏≤‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÄ‡∏ï‡πá‡∏° */
    }
    /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡∏ö‡∏ô‡∏à‡∏≠‡πÉ‡∏´‡∏ç‡πà */
    @media (min-width: 1200px){
      .brand-logo{ height: 60px; }
      .site-header{ min-height: 72px; }
    }
    /* ‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡∏Å‡πá‡∏¢‡∏±‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° */
    @media (max-width: 900px){
      .brand-logo{ height: 56px; }
    }

    /* ----- ‚Äú‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏ß‚Äù ‡πÅ‡∏ö‡∏ö CSS (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö JPG ‡∏Ç‡∏≤‡∏ß) -----
       ‡πÉ‡∏ä‡πâ mix-blend-mode: multiply ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏¢
       ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏£‡∏¥‡∏Ñ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° ‡πÑ‡∏°‡πà‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡πà‡∏≤ PNG ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™‡∏à‡∏£‡∏¥‡∏á */
    .brand-logo--blend {
      mix-blend-mode: multiply;
      background: transparent;
      /* ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏î‡∏π‡∏Ñ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
      filter: contrast(1.1) brightness(1.03);
    }
    /* ‡πÉ‡∏ô dark mode ‡πÉ‡∏´‡πâ‡πÄ‡∏ö‡∏£‡∏Å‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏û‡∏°‡∏∑‡∏î‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ */
    :root[data-theme="dark"] .brand-logo--blend{
      mix-blend-mode: screen;
      filter: contrast(1.05) brightness(1.06);
    }

    /* ----- ‡πÄ‡∏°‡∏ô‡∏π ----- */
    .main-nav{
      display:flex; align-items:center; gap:24px;
      justify-self:start;
      margin-left:12px;
      min-width:0;
    }
    .main-nav a{
      text-decoration:none; padding:8px 10px; border-radius:8px; font-weight:600;
      color: var(--muted); white-space:nowrap;
      transition: background .2s ease, color .2s ease;
    }
    .main-nav a:hover{
      color: var(--text);
      background: color-mix(in oklab, var(--primary) 10%, transparent);
    }
    .main-nav a.active{
      background: color-mix(in oklab, var(--primary) 14%, transparent);
      color: var(--primary);
      box-shadow: inset 0 -3px 0 color-mix(in oklab, var(--primary) 50%, transparent);
    }

    /* ----- Actions ‡∏Ç‡∏ß‡∏≤ ----- */
    .header-actions{
      display:flex; align-items:center; gap:14px;
      justify-self:end; white-space:nowrap; flex:0 0 auto;
    }
    .cart-link{
      text-decoration:none; padding:6px 12px; border-radius:20px;
      background: rgba(0,0,0,.05);
    }
    .cart-badge{
      background:#ff3b30; color:#fff; border-radius:999px;
      padding:2px 6px; font-size:12px; margin-left:4px;
    }

    .theme-toggle{
      display:inline-flex; align-items:center; justify-content:center;
      height:36px; min-width:36px; padding:0 10px; border-radius:10px;
      border:1px solid var(--border); background:var(--panel); cursor:pointer; transition:.2s;
    }
    .theme-toggle:hover{ background: rgba(11,99,246,.06); border-color: rgba(11,99,246,.35); }
    .theme-toggle:active{ transform: translateY(1px); }
    .theme-toggle .icon{ font-size:16px; line-height:1; }

    /* ===== Navbar fixed & bg ‡∏ó‡∏∂‡∏ö ===== */
    .navbar{
      position: fixed;
      top: 0; left: 0; right: 0;
      z-index: 1200;
      background: #ffffff;
      border-bottom:1px solid var(--border);
    }
    :root[data-theme="dark"] .navbar{ background: #1e293b; }

    /* Responsive tweaks */
    @media (max-width: 1200px){ .header-actions .greet{ display:none; } }
    @media (max-width: 900px){ .main-nav{ gap:16px; font-size:14px; } }
  </style>

  <div class="container site-header">
    <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ -->
    <a class="brand" href="/" aria-label="‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å PFP">
      <!-- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ ‡πÉ‡∏´‡πâ‡∏™‡∏•‡∏±‡∏ö src ‡πÄ‡∏õ‡πá‡∏ô PNG/SVG ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ -->
      <!-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏•‡∏≤‡∏™ brand-logo--blend ‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ú‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á ‚Äú‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏ß‚Äù ‡∏î‡πâ‡∏ß‡∏¢ CSS -->
      <img
        src="/images/logo2.jpg"
        alt="PFP Logo"
        class="brand-logo brand-logo--blend"
        onerror="this.onerror=null;this.src='/images/logo3.jpg';"
      >
    </a>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π -->
    <nav class="main-nav" role="navigation" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
      <a href="/"           class="<%= (path||'')==='/' ? 'active' : '' %>">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <a href="/products"   class="<%= (path||'').startsWith('/products')  ? 'active' : '' %>">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
      <a href="/portfolio"  class="<%= (path||'').startsWith('/portfolio') ? 'active' : '' %>">‡∏ú‡∏•‡∏á‡∏≤‡∏ô</a>
      <a href="/about"      class="<%= (path||'')==='/about'    ? 'active' : '' %>">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤</a>
      <a href="/contact"    class="<%= (path||'')==='/contact'  ? 'active' : '' %>">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
    </nav>

    <!-- Actions -->
    <div class="header-actions">
      <% if (typeof user !== 'undefined' && user) { %>
        <span class="greet">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <%= user.name || user.email %></span>
        <a href="/orders/mine" class="<%= (path||'').startsWith('/orders') ? 'active' : '' %>">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
        <form method="post" action="/auth/logout" style="margin:0;">
          <button class="btn btn--outline btn--sm">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
        </form>
      <% } else { %>
        <a href="/auth/login" class="<%= (path||'').startsWith('/auth/login') ? 'active' : '' %>">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
      <% } %>

      <a href="/cart"
         class="cart-link <%= (path||'').startsWith('/cart') || (path||'').startsWith('/checkout') ? 'active' : '' %>">
        ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ <span class="cart-badge" id="cartCount"><%= typeof cartCount !== 'undefined' ? cartCount : 0 %></span>
      </a>

      <button id="themeToggle" class="theme-toggle" type="button" aria-label="Toggle theme">
        <span class="icon" id="themeIcon">üåô</span>
      </button>
    </div>
  </div>

  <!-- Theme toggle -->
  <script>
    (function(){
      const THEME_KEY='pfp.theme';
      const html=document.documentElement;
      const btn=document.getElementById('themeToggle');
      const icon=document.getElementById('themeIcon');

      function sync(){ icon.textContent = html.getAttribute('data-theme')==='dark' ? '‚òÄÔ∏è' : 'üåô'; }

      (function init(){
        const saved=localStorage.getItem(THEME_KEY);
        if(saved==='light'||saved==='dark'){
          html.setAttribute('data-theme', saved);
        }else{
          const prefersDark=window.matchMedia?.('(prefers-color-scheme: dark)').matches;
          html.setAttribute('data-theme', prefersDark ? 'dark' : 'light');
        }
        sync();
      })();

      btn && btn.addEventListener('click', ()=>{
        const next = html.getAttribute('data-theme')==='dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', next);
        localStorage.setItem(THEME_KEY, next);
        sync();
      });
    })();
  </script>
</header>
